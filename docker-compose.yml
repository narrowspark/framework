version: '3'
services:
    php73_64:
      build:
        context: ./.docker/php/64bit/
        args:
          PHP_VERSION: "7.3.0"
          XDEBUG_VERSION: "2.7.1"
          INSTALL_XDEBUG: "true"
      expose:
        - 9000
      volumes:
        - data:/var/www/framework
      links:
        - mysql
        - redis
      tty: true

    php74_64:
      build:
        context: ./.docker/php/64bit/
        args:
          PHP_VERSION: "7.4.0RC6"
          XDEBUG_VERSION: "2.8.0"
          INSTALL_XDEBUG: "true"
      expose:
        - 9000
      volumes:
        - data:/var/www/framework
      links:
        - mysql
        - redis
      tty: true

    mysql:
        image: mysql:latest
        expose:
            - 3306
        environment:
            MYSQL_ROOT_PASSWORD: root
            MYSQL_DATABASE: test
            MYSQL_USER: test
            MYSQL_PASSWORD: test

    redis:
        image: redis:latest
        expose:
            - 6379

volumes:
  data:
    driver: lebokus/bindfs:latest
    driver_opts:
      sourcePath: "${PWD}"
      map: "${UID:-1000}/0:@${UID:-1000}/@0"
